<app-loading-employee
  *ngIf="!APIsuccess"
  class="d-flex justify-content-center h-100 align-items-center">
</app-loading-employee>
<div class="container-fluid mx-0 px-0" *ngIf="APIsuccess">
  <form *ngIf="APIsuccess" [formGroup]="emp" (ngSubmit)="Submit()">
    <div class="row mb-3">
      <div class="col-12">
        <div class="block-shadow">
          <div class="container">
            <div class="row">
              <div class="font-header mb-4 px-0">ข้อมูลส่วนตัว</div>
            </div>
            <div class="row px-5">
              <div class="col-6 mb-2">
                <div class="row d-flex align-items-center">
                  <div class="col-4 font-detail-b">คำนำหน้า</div>
                  <div class="col-7 font-detail">
                    <ng-select
                      [searchable]="false"
                      placeholder="เลือกคำนำหน้าชื่อ"
                      [clearable]="false"
                      [ngClass]="{
                      customnull:
                      emp.controls.ud_prefix_id.errors && submitted
                      }"
                      class="custom d-flex justify-content-center"
                      formControlName="ud_prefix_id">
                      <ng-option [value]="1">นาย</ng-option>
                      <ng-option [value]="2">นาง</ng-option>
                      <ng-option [value]="3">นางสาว</ng-option>
                    </ng-select>
                    <div class="row" *ngIf="emp.controls.ud_prefix_id.errors &&
                      submitted">
                      <div class="alerttext text-end">
                        กรุณากรอกข้อมูล
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-6 mb-2">
                <div class="row d-flex align-items-center">
                  <div class="col-5 font-detail-b ps-5">ชื่อเล่น</div>
                  <div class="col font-detail">
                    <input
                      formControlName="ud_nickname"
                      textarea
                      class="form-control"
                      id="exampleFormControlTextarea1"
                      rows="3"
                      [ngClass]="{
                      isinvalid: emp.controls.ud_nickname.errors && submitted
                      }"
                      placeholder="กรอกชื่อเล่น"
                      />
                    <div class="row" *ngIf="emp.controls.ud_nickname.errors &&
                      submitted">
                      <div class="alerttext text-end">
                        กรุณากรอกข้อมูล
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-6 mb-2">
                <div class="row d-flex align-items-center">
                  <div class="col-4 font-detail-b">ชื่อ</div>
                  <div class="col-7 font-detail">
                    <input
                      formControlName="ud_fullname_th"
                      textarea
                      class="form-control"
                      id="exampleFormControlTextarea1"
                      [ngClass]="{
                      isinvalid:
                      emp.controls.ud_fullname_th.errors && submitted
                      }"
                      rows="3"
                      placeholder="กรอกชื่อ-นามสกุลภาษาไทย"
                      />
                    <div class="row" *ngIf="emp.controls.ud_fullname_th.errors
                      && submitted">
                      <div class="alerttext text-end">
                        กรุณากรอกข้อมูล
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-6 mb-2">
                <div class="row d-flex align-items-center">
                  <div class="col-5 font-detail-b ps-5">รหัสบัตรประชาชน</div>
                  <div class="col font-detail">
                    <input
                      formControlName="ud_id_card"
                      textarea
                      class="form-control"
                      id="exampleFormControlTextarea1"
                      rows="3"
                      [ngClass]="{
                      isinvalid:
                      (emp.controls.ud_id_card.errors && submitted) ||
                      IDcarderr
                      }"
                      placeholder="กรอกรหัสบัตรประชาชน"
                      maxlength="13"
                      minlength="13"
                      (keypress)="iputNumberOnly($event)"
                      />
                    <div class="row" *ngIf="emp.controls.ud_id_card.errors &&
                      submitted">
                      <div class="alerttext text-end">
                        กรุณากรอกข้อมูล
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-6 mb-2">
                <div class="row d-flex align-items-center">
                  <div class="col-4 font-detail-b">นามสกุล</div>
                  <div class="col-7 font-detail">
                    <input
                      formControlName="ud_fullname_th2"
                      textarea
                      class="form-control"
                      id="exampleFormControlTextarea1"
                      [ngClass]="{
                      isinvalid:
                      emp.controls.ud_fullname_th2.errors && submitted
                      }"
                      rows="3"
                      placeholder="กรอกชื่อ-นามสกุลภาษาไทย"
                      />
                    <div class="row" *ngIf="emp.controls.ud_fullname_th2.errors
                      && submitted">
                      <div class="alerttext text-end">
                        กรุณากรอกข้อมูล
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-6 mb-2">
                <div class="row d-flex align-items-center">
                  <div class="col-5 font-detail-b ps-5">วันเดือนปีเกิด</div>
                  <div class="col font-detail">
                    <input
                      formControlName="ud_birthday"
                      type="text"
                      placeholder="เลือกวันเดือนปีเกิด"
                      class="form-control"
                      bsDatepicker
                      [ngClass]="{
                      isinvalid: emp.controls.ud_birthday.errors && submitted
                      }"
                      [bsConfig]="{
                      isAnimated: true,
                      dateInputFormat: 'DD/MM/YYYY',
                      containerClass: 'theme-dark-blue',
                      showWeekNumbers: false
                      }"
                      [maxDate]="today"
                      (keypress)="(false)"
                      (ngModelChange)="onValueChangeDateBTH($event)"
                      />
                    <div class="row" *ngIf="emp.controls.ud_birthday.errors &&
                      submitted">
                      <div class="alerttext text-end">
                        กรุณากรอกข้อมูล
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-6 mb-2">
                <div class="row d-flex align-items-center">
                  <div class="col-4 font-detail-b">Name</div>
                  <div class="col-7 font-detail">
                    <input
                      formControlName="ud_fullname_en"
                      textarea
                      class="form-control"
                      id="exampleFormControlTextarea1"
                      [ngClass]="{
                      isinvalid:
                      emp.controls.ud_fullname_en.errors && submitted
                      }"
                      rows="3"
                      placeholder="กรอกชื่อ-นามสกุลภาษาอังกฤษ"
                      />
                    <div class="row" *ngIf="emp.controls.ud_fullname_en.errors
                      && submitted">
                      <div class="alerttext text-end">
                        กรุณากรอกข้อมูล
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-6 mb-2">
                <div class="row d-flex align-items-center">
                  <div class="col-5 font-detail-b ps-5">เบอร์โทรศัพท์</div>
                  <div class="col font-detail">
                    <input
                      formControlName="ud_phone"
                      textarea
                      class="form-control"
                      id="exampleFormControlTextarea1"
                      rows="3"
                      [ngClass]="{
                      isinvalid: emp.controls.ud_phone.errors && submitted
                      }"
                      placeholder="กรอกเบอร์โทรศัพท์"
                      maxlength="10"
                      minlength="10"
                      (keypress)="iputNumberOnly($event)"
                      />
                    <div class="row" *ngIf="emp.controls.ud_phone.errors &&
                      submitted">
                      <div class="alerttext text-end">
                        กรุณากรอกข้อมูล
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-6 mb-2">
                <div class="row d-flex align-items-center">
                  <div class="col-4 font-detail-b">Last name</div>
                  <div class="col-7 font-detail">
                    <input
                      formControlName="ud_fullname_en2"
                      textarea
                      class="form-control"
                      id="exampleFormControlTextarea1"
                      [ngClass]="{
                      isinvalid:
                      emp.controls.ud_fullname_en2.errors && submitted
                      }"
                      rows="3"
                      placeholder="กรอกชื่อ-นามสกุลภาษาอังกฤษ"
                      />
                    <div class="row" *ngIf="emp.controls.ud_fullname_en2.errors
                      && submitted">
                      <div class="alerttext text-end">
                        กรุณากรอกข้อมูล
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-6 mb-2">
                <div class="row d-flex align-items-center">
                  <div class="col-5 font-detail-b ps-5">อีเมล</div>
                  <div class="col font-detail">
                    <input
                      formControlName="ud_email"
                      textarea
                      class="form-control"
                      id="exampleFormControlTextarea1"
                      rows="3"
                      [ngClass]="{
                      isinvalid: emp.controls.ud_email.errors && submitted
                      }"
                      placeholder="กรอกอีเมล"
                      email="true"
                      />
                    <div class="row" *ngIf="emp.controls.ud_email.errors &&
                      submitted">
                      <div class="alerttext text-end">
                        กรุณากรอกข้อมูล
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <div class="block-shadow">
          <div class="container">
            <div class="row">
              <div class="font-header mb-4 px-0">ข้อมูลในบริษัท</div>
            </div>
            <div class="row ps-5 px-2 font-detail">
              <div class="col-4 mb-2 font-detail-b d-flex align-items-center">บริษัท</div>
              <div class="col-8 mb-2">
                <div class="col-12">
                  <div class="row">
                    <div class="col-10">
                      <input
                        formControlName="user_company"
                        textarea
                        class="form-control"
                        id="exampleFormControlTextarea1"
                        rows="3"
                        [ngClass]="{
                        isinvalid:
                        emp.controls.user_company.errors && submitted
                        }"
                        placeholder="กรอกบริษัท"
                        />
                      <div class="row" *ngIf="emp.controls.user_company.errors
                        && submitted">
                        <div class="alerttext text-end">
                          กรุณากรอกข้อมูล
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-4 mb-2 font-detail-b d-flex align-items-center">แผนก</div>
              <div class="col-8 mb-2">
                <div class="col-12">
                  <div class="row">
                    <div class="col-10">
                      <ng-select
                        formControlName="dept_name_en"
                        [searchable]="false"
                        placeholder="เลือกแผนก"
                        [clearable]="false"
                        [ngClass]="{
                        customnull:
                        emp.controls.dept_name_en.errors && submitted
                        }"
                        class="custom d-flex justify-content-center"
                        (change)="changeDepartment($event)">
                        <ng-option
                          *ngFor="let department of objDepartment"
                          [value]="department.dept_id">{{
                          department.dept_name_en }}</ng-option>
                      </ng-select>
                      <div class="row" *ngIf="emp.controls.dept_name_en.errors
                        && submitted">
                        <div class="alerttext text-end">
                          กรุณากรอกข้อมูล
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-4 mb-2 font-detail-b d-flex align-items-start pt-2">ตำแหน่ง</div>
              <div class="col-8 mb-2">
                <div class="col-12">
                  <div
                    class="row"
                    *ngFor="let posit of aryPositionCount; let i= index">
                    <div class="col-10 font-detail">
                      <ng-select
                        [(ngModel)]="Position[i].positions"
                        [searchable]="false"
                        placeholder="เลือกตำแหน่ง"
                        [clearable]="false"
                        [ngModelOptions]="{ standalone: true }"
                        class="custom d-flex justify-content-center mb-2"
                        [ngClass]="{ lastItemSelect: i + 1 == Position.length }"
                        [ngClass]="{
                        customnull: Position[i].positions == null && submitted
                        }"
                        (change)="selectedPosition()"
                        (click)="settingIndex(i)">
                        <ng-option
                          *ngFor="let posit of positionDept"
                          [value]="posit.position">{{ posit.position }}
                        </ng-option>
                      </ng-select>
                      <div class="row" *ngIf="(Position[i].positions == null) &&
                        submitted">
                        <div class="alerttext text-end">
                          กรุณากรอกข้อมูล
                        </div>
                      </div>
                    </div>
                    <div
                      *ngIf="Position.length> 1"
                      class="col-2 py-2"
                      (click)="deleteDeptPosit(i)"
                      >
                      <i
                        class="fa-solid fa-circle-xmark delete-dept iconDept"
                        style="cursor: pointer"></i>
                    </div>
                  </div>
                </div>

                <div class="ms-0 text-button" (click)="addInputDeptPosit()">
                  <i
                    class="fa-solid fa-circle-plus"
                    style="margin-right: 5px"></i>เพิ่มตำแหน่ง
                </div>
              </div>
              <div class="col-4 mb-2 font-detail-b d-flex align-items-center">ประเภทพนักงาน</div>
              <div class="col-8 mb-2">
                <div class="col-12">
                  <div class="row">
                    <div class="col-10">
                      <ng-select
                        formControlName="user_contract_name"
                        [searchable]="false"
                        placeholder="เลือกประเภทพนักงาน"
                        [ngClass]="{
                        customnull:
                        emp.controls.user_contract_name.errors && submitted
                        }"
                        [clearable]="false"
                        class="custom d-flex justify-content-center">
                        <ng-option value="1">พนักงานประจำ</ng-option>
                        <ng-option value="2">สัญญาจ้าง</ng-option>
                      </ng-select>
                      <div class="row"
                        *ngIf="emp.controls.user_contract_name.errors &&
                        submitted">
                        <div class="alerttext text-end">
                          กรุณากรอกข้อมูล
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-4 mb-2 font-detail-b d-flex align-items-center">รหัสพนักงาน</div>
              <div class="col-8 mb-2">{{ objData.user_card_number }}</div>
              <div class="col-4 mb-2 font-detail-b d-flex align-items-center">วันที่เริ่มงาน</div>
              <div class="col-8 mb-2">
                <div class="col-12">
                  <div class="row">
                    <div class="col-10">
                      <input
                        formControlName="user_created_at"
                        type="text"
                        placeholder="เลือกวันที่เริ่มงาน"
                        class="form-control"
                        [ngClass]="{
                        isinvalid:
                        emp.controls.user_created_at.errors && submitted
                        }"
                        bsDatepicker
                        [bsConfig]="{
                        isAnimated: true,
                        dateInputFormat: 'DD/MM/YYYY',
                        containerClass: 'theme-dark-blue',
                        showWeekNumbers: false
                        }"
                        (keypress)="(false)"
                        (ngModelChange)="onValueChangeDateStart($event)"
                        />
                      <div class="row"
                        *ngIf="emp.controls.user_created_at.errors &&
                        submitted">
                        <div class="alerttext text-end">
                          กรุณากรอกข้อมูล
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-4 mb-2 font-detail-b d-flex align-items-center">อายุงาน</div>
              <div class="col-8 mb-2">{{ objData.user_exprience }}</div>
              <div class="col-4 mb-2 font-detail-b d-flex align-items-center">วันที่ทำงานวันสุดท้าย</div>
              <div class="col-8 mb-2">
                <div class="col-12">
                  <div class="row">
                    <div class="col-10">
                      <input
                        [formControl]="user_deleted_at"
                        type="text"
                        placeholder="วันที่ทำงานวันสุดท้าย"
                        class="form-control"
                        bsDatepicker
                        [ngClass]="{
                        isinvalid:
                        emp.controls.ud_birthday.errors && submitted
                        }"
                        [bsConfig]="{
                        isAnimated: true,
                        dateInputFormat: 'DD/MM/YYYY',
                        containerClass: 'theme-dark-blue',
                        showWeekNumbers: false
                        }"
                        (keypress)="(false)"
                        />
                      <div class="row" *ngIf="emp.controls.ud_birthday.errors &&
                        submitted">
                        <div class="alerttext text-end">
                          กรุณากรอกข้อมูล
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-6">
        <div class="block-shadow">
          <div class="container">
            <div class="row">
              <div class="font-header mb-4 px-0">สิทธิวันลาคงเหลือ</div>
            </div>
            <div class="row px-5 font-detail d-flex align-items-center">
              <div class="col-6 mb-2">ลากิจ</div>
              <div class="col-6 mb-2">
                <input
                  formControlName="user_leave_day"
                  textarea
                  class="form-control form-input"
                  [ngClass]="{
                  isinvalid: emp.controls.user_leave_day.errors && submitted
                  }"
                  id="exampleFormControlTextarea1"
                  rows="3"
                  placeholder="6"
                  type="number"
                  min="0"
                  (keypress)="inputMinusDetect($event)"
                  />
                <div class="row" *ngIf="emp.controls.user_leave_day.errors &&
                  submitted">
                  <div class="alerttext text-end">กรุณากรอกข้อมูล</div>
                </div>
              </div>
              <div class="col-6 mb-2">ลาป่วย</div>
              <div class="col-6 mb-2">
                <input
                  formControlName="user_sick_day"
                  textarea
                  class="form-control form-input"
                  [ngClass]="{
                  isinvalid: emp.controls.user_sick_day.errors && submitted
                  }"
                  id="exampleFormControlTextarea1"
                  rows="3"
                  placeholder="30"
                  type="number"
                  min="0"
                  (keypress)="inputMinusDetect($event)"
                  />
                <div class="row" *ngIf="emp.controls.user_sick_day.errors &&
                  submitted">
                  <div class="alerttext text-end">กรุณากรอกข้อมูล</div>
                </div>
              </div>
              <div class="col-6 mb-2">ลาพักร้อน</div>
              <div class="col-6 mb-2">
                <input
                  formControlName="user_take_annual_day"
                  textarea
                  class="form-control form-input"
                  [ngClass]="{
                  isinvalid:
                  emp.controls.user_take_annual_day.errors && submitted
                  }"
                  id="exampleFormControlTextarea1"
                  rows="3"
                  placeholder="12"
                  type="number"
                  min="0"
                  (keypress)="inputMinusDetect($event)"
                  />
                <div class="row" *ngIf="emp.controls.user_take_annual_day.errors
                  && submitted">
                  <div class="alerttext text-end">กรุณากรอกข้อมูล</div>
                </div>
              </div>
              <div class="col-6 mb-2">ลาคลอด</div>
              <div class="col-6 mb-2">
                <input
                  formControlName="user_maternity_day"
                  textarea
                  class="form-control form-input"
                  [ngClass]="{
                  isinvalid:
                  emp.controls.user_maternity_day.errors && submitted
                  }"
                  id="exampleFormControlTextarea1"
                  rows="3"
                  placeholder="-"
                  type="number"
                  min="0"
                  (keypress)="inputMinusDetect($event)"
                  />
                <div class="row" *ngIf="emp.controls.user_maternity_day.errors
                  && submitted">
                  <div class="alerttext text-end">กรุณากรอกข้อมูล</div>
                </div>
              </div>
              <div class="col-6 mb-2">ลาบวช</div>
              <div class="col-6 mb-2">
                <input
                  formControlName="user_ordination_day"
                  textarea
                  class="form-control form-input"
                  [ngClass]="{
                  isinvalid:
                  emp.controls.user_ordination_day.errors && submitted
                  }"
                  id="exampleFormControlTextarea1"
                  rows="3"
                  placeholder="7"
                  type="number"
                  min="0"
                  (keypress)="inputMinusDetect($event)"
                  />
                <div class="row" *ngIf="emp.controls.user_ordination_day.errors
                  && submitted">
                  <div class="alerttext text-end">กรุณากรอกข้อมูล</div>
                </div>
              </div>
              <div class="col-6 mb-2">ลาเพื่อรับราชการทหาร</div>
              <div class="col-6 mb-2">
                <input
                  formControlName="user_military_service_day"
                  textarea
                  class="form-control form-input"
                  [ngClass]="{
                  isinvalid:
                  emp.controls.user_military_service_day.errors && submitted
                  }"
                  id="exampleFormControlTextarea1"
                  rows="3"
                  placeholder="30"
                  type="number"
                  min="0"
                  (keypress)="inputMinusDetect($event)"
                  />
                <div class="row"
                  *ngIf="emp.controls.user_military_service_day.errors &&
                  submitted">
                  <div class="alerttext text-end">กรุณากรอกข้อมูล</div>
                </div>
              </div>
              <div class="col-6 mb-2">ลาเพื่อทำหมัน</div>
              <div class="col-6 mb-2">
                <input
                  formControlName="user_sterilization_day"
                  textarea
                  class="form-control form-input"
                  [ngClass]="{
                  isinvalid:
                  emp.controls.user_sterilization_day.errors && submitted
                  }"
                  id="exampleFormControlTextarea1"
                  rows="3"
                  placeholder="-"
                  type="number"
                  min="0"
                  (keypress)="inputMinusDetect($event)"
                  />
                <div class="row"
                  *ngIf="emp.controls.user_sterilization_day.errors &&
                  submitted">
                  <div class="alerttext text-end">กรุณากรอกข้อมูล</div>
                </div>
              </div>
              <div class="col-6 mb-2">ลาโดยไม่รับเงิน</div>
              <div class="col-6 mb-2">
                <input
                  formControlName="user_without_pay_day"
                  textarea
                  class="form-control form-input"
                  [ngClass]="{
                  isinvalid:
                  emp.controls.user_without_pay_day.errors && submitted
                  }"
                  id="exampleFormControlTextarea1"
                  rows="3"
                  placeholder="-"
                  type="number"
                  min="0"
                  (keypress)="inputMinusDetect($event)"
                  />
                <div class="row" *ngIf="emp.controls.user_without_pay_day.errors
                  && submitted">
                  <div class="alerttext text-end">กรุณากรอกข้อมูล</div>
                </div>
              </div>
              <div class="col-6 mb-2">ลาใช้สิทธิทดแทน</div>
              <div class="col-6 mb-2">
                <input
                  formControlName="user_resign_day"
                  textarea
                  class="form-control form-input"
                  [ngClass]="{
                  isinvalid: emp.controls.user_resign_day.errors && submitted
                  }"
                  id="exampleFormControlTextarea1"
                  rows="3"
                  placeholder="-"
                  type="number"
                  min="0"
                  (keypress)="inputMinusDetect($event)"
                  />
                <div class="row" *ngIf="emp.controls.user_resign_day.errors &&
                  submitted">
                  <div class="alerttext text-end">กรุณากรอกข้อมูล</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row mb-4 mt-5 d-flex justify-content-center">
      <div class="col-6 col-sm-3 col-md-3 col-lg-3">
        <button
          class="cancel-button d-flex justify-content-center w-100"
          type=""
          routerLink="../">
          <div class="cancel-text">ยกเลิก</div>
        </button>
      </div>
      <div class="col-6 col-sm-3 col-md-3 col-lg-3">
        <button
          class="submit-button d-flex justify-content-center w-100"
          type="submit">
          <div class="submit-text">บันทึก</div>
        </button>
      </div>
    </div>
  </form>
</div>
